<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
Jala 1.0 Overview
</title>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="Date.js Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b>Jala 1.0</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>Date.js</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		Fields and methods of the jala.Date class.<BR/><BR/>
	
</p>

<hr>


    <table border="1" cellpadding="3" cellspacing="0" width="100%">
    <tr bgcolor="#CCCCFF" class="TableHeadingColor">
    <td colspan=2><font size="+2">
    
        <b>Class Summary</b>
    
    </font></td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="jala.Date.html">jala.Date</a></b></td>
    <td>This class provides various convenience
 methods for rendering purposes.</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="jala.Date.Calendar.html">jala.Date.Calendar</a></b></td>
    <td>This class represents a calendar based based on a grouped
 collection of HopObjects.</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="jala.Date.Calendar.Renderer.html">jala.Date.Calendar.Renderer</a></b></td>
    <td>A default renderer to use in conjunction with jala.Date.Calendar
 </td>
    </tr>
    
    </table>
    <hr/> 


<!-- ========== METHOD SUMMARY =========== -->

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">//</span>
<span class="comment">// Jala Project [http://opensvn.csie.org/traccgi/jala]</span>
<span class="comment">//</span>
<span class="comment">// Copyright 2004 ORF Online und Teletext GmbH</span>
<span class="comment">//</span>
<span class="comment">// Licensed under the Apache License, Version 2.0 (the ``License'');</span>
<span class="comment">// you may not use this file except in compliance with the License.</span>
<span class="comment">// You may obtain a copy of the License at</span>
<span class="comment">//</span>
<span class="comment">//    http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="comment">//</span>
<span class="comment">// Unless required by applicable law or agreed to in writing, software</span>
<span class="comment">// distributed under the License is distributed on an ``AS IS'' BASIS,</span>
<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="comment">// See the License for the specific language governing permissions and</span>
<span class="comment">// limitations under the License.</span>
<span class="comment">//</span>
<span class="comment">// $Revision$</span>
<span class="comment">// $LastChangedBy$</span>
<span class="comment">// $LastChangedDate$</span>
<span class="comment">// $HeadURL$</span>
<span class="comment">//</span>

<span class="comment">/**
 * <span class="attrib">@fileoverview</span> Fields and methods of the jala.Date class.
 */</span>

<span class="comment">// Define the global namespace for Jala modules</span>
<span class="reserved">if</span> (!global.jala) {
   global.jala = {};
}


<span class="comment">/**
 * HelmaLib dependencies
 */</span>
app.addRepository(<span class="literal">"modules/core/Date.js"</span>);
app.addRepository(<span class="literal">"modules/helma/Html.js"</span>);

<span class="comment">/**
 * Constructs a new Renderings object.
 * <span class="attrib">@class</span> This class provides various convenience
 * methods for rendering purposes.
 * <span class="attrib">@constructor</span>
 */</span>
jala.Date = <span class="reserved">function</span>() {
   <span class="reserved">return</span> <span class="reserved">this</span>;
};

<span class="comment">/**
 * Renders a timestamp as set of DropDown boxes, following the
 * format passed as argument. Every &amp;lt;select&amp;gt;
 * item is prefixed with a string so that it can be retrieved
 * easily from the values of a submitted POST request.
 * <span class="attrib">@param</span> {String} prefix The prefix to use for all dropdown boxes, eg. "postdate"
 * <span class="attrib">@param</span> {Date} date A Date object to use as preselection (optional)
 * <span class="attrib">@param</span> {Object} fmt Array containing one parameter object for every single
 * select box that should be rendered, with the following properties set:
 * &lt;ul&gt;
 * &lt;li&gt;pattern - The date format pattern that should be rendered. Valid
 * patterns are: "dd", "MM", "yyyy", "HH", "ss".&lt;/li&gt;
 * &lt;li&gt;firstOption - The string to use as first option, eg.: "choose a day"&lt;/li&gt;
 * &lt;/ul&gt;
 */</span>
jala.Date.<span class="reserved">prototype</span>.renderEditor = <span class="reserved">function</span>(prefix, date, fmt) {
   <span class="comment">/**
    * rendering method
    * <span class="attrib">@private</span>
    */</span>
   var render = <span class="reserved">function</span>(param, date) {
      switch (param.pattern) {
         case <span class="literal">"dd"</span>:
         param.offset = 1;
         param.max = 31;
         param.selected = (date ? date.getDate() : null);
         break;

         case <span class="literal">"MM"</span>:
         param.offset = 1;
         param.max = 12;
         param.selected = (date ? date.getMonth() +1 : null);
         break;

         case <span class="literal">"yyyy"</span>:
         param.offset = 2002;
         param.max = 20;
         param.selected = (date ? date.getFullYear() : null);
         break;

         case <span class="literal">"HH"</span>:
         param.offset = 0;
         param.max = 24;
         param.selected = (date ? date.getHours() : null);
         break;

         case <span class="literal">"mm"</span>:
         param.offset = 0;
         param.max = 60;
         param.selected = (date ? date.getMinutes() : null);
         break;

         case <span class="literal">"ss"</span>:
         param.offset = 0;
         param.max = 60;
         param.selected = (date ? date.getSeconds() : null);
         break;
      }

      var key = prefix + <span class="literal">":"</span> + param.pattern;
      <span class="reserved">if</span> (req.data[key])
         param.selected = req.data[key];
      var options = [];
      var opt;
      <span class="reserved">for</span> (var i=0;i&lt;param.max;i++) {
         opt = (param.offset + i).format(<span class="literal">"00"</span>);
         options[i] = [opt, opt];
      }
      var html = new helma.Html();
      html.dropDown({name: key}, options, param.selected, param.firstOption);
   }

   <span class="reserved">if</span> (!fmt)
      var fmt = [{pattern: <span class="literal">"dd"</span>, firstOption: <span class="literal">"day"</span>},
                 {pattern: <span class="literal">"MM"</span>, firstOption: <span class="literal">"month"</span>},
                 {pattern: <span class="literal">"yyyy"</span>, firstOption: <span class="literal">"year"</span>},
                 {pattern: <span class="literal">"HH"</span>, firstOption: <span class="literal">"hour"</span>},
                 {pattern: <span class="literal">"mm"</span>, firstOption: <span class="literal">"minute"</span>}];

   <span class="reserved">for</span> (var i in fmt) {
      render(fmt[i], date);
   }
   <span class="reserved">return</span>;
};

<span class="comment">/**
 * Returns a timestamp as set of dropdown-boxes
 * <span class="attrib">@see</span> #renderEditor
 * <span class="attrib">@type</span> String
 */</span>
jala.Date.<span class="reserved">prototype</span>.renderEditorAsString = <span class="reserved">function</span>(prefix, date, pattern) {
   res.push();
   <span class="reserved">this</span>.renderEditor(prefix, date, pattern);
   <span class="reserved">return</span> res.pop();
};

<span class="comment">/**
 * Creates a new instance of jala.Data.Calendar
 * <span class="attrib">@class</span> This class represents a calendar based based on a grouped
 * collection of HopObjects. It provides several methods for rendering
 * the calendar plus defining locale and timezone settings.
 * <span class="attrib">@param</span> {HopObject} collection A grouped HopObject collection to work on
 * <span class="attrib">@returns</span> A newly created jala.Date.Calendar instance
 * <span class="attrib">@constructor</span>
 */</span>
jala.Date.Calendar = <span class="reserved">function</span>(collection) {
   var renderer = null;
   var locale = java.util.Locale.getDefault();
   var timezone = java.util.TimeZone.getDefault();
   var hrefFormat = <span class="literal">"yyyyMMdd"</span>;
   var accessNameFormat = <span class="literal">"yyyyMMdd"</span>;

   <span class="comment">/**
    * Returns the collection this calendar object works on
    * <span class="attrib">@returns</span> The HopObject collection of this calendar
    * <span class="attrib">@type</span> HopObject
    */</span>
   <span class="reserved">this</span>.getCollection = <span class="reserved">function</span>() {
      <span class="reserved">return</span> collection;
   };

   <span class="comment">/**
    * Sets the renderer to use.
    * <span class="attrib">@param</span> {Object} r The renderer to use
    * <span class="attrib">@see</span> #getRenderer
    */</span>
   <span class="reserved">this</span>.setRenderer = <span class="reserved">function</span>(r) {
      renderer = r;
      <span class="reserved">return</span>;
   };

   <span class="comment">/**
    * Returns the renderer used by this calendar.
    * <span class="attrib">@returns</span> The calendar renderer
    * <span class="attrib">@type</span> Object
    * <span class="attrib">@see</span> #setRenderer
    */</span>
   <span class="reserved">this</span>.getRenderer = <span class="reserved">function</span>() {
      <span class="reserved">if</span> (!renderer) {
         renderer = new jala.Date.Calendar.Renderer(<span class="reserved">this</span>);
      }
      <span class="reserved">return</span> renderer;
   };

   <span class="comment">/**
    * Sets the locale to use within this calendar object
    * <span class="attrib">@param</span> {java.util.Locale} loc The locale to use
    * <span class="attrib">@see</span> #getLocale
    */</span>
   <span class="reserved">this</span>.setLocale = <span class="reserved">function</span>(loc) {
      locale = loc;
      <span class="reserved">return</span>;
   };

   <span class="comment">/**
    * Returns the locale used within this calendar instance.  By default
    * the locale used by this calendar is the default locale of the
    * Java Virtual Machine running Helma.
    * <span class="attrib">@returns</span> The locale of this calendar
    * <span class="attrib">@type</span> java.util.Locale
    * <span class="attrib">@see</span> #setLocale
    */</span>
   <span class="reserved">this</span>.getLocale = <span class="reserved">function</span>() {
      <span class="reserved">return</span> locale;
   };

   <span class="comment">/**
    * Sets the locale to use within this calendar object
    * <span class="attrib">@param</span> {java.util.Locale} loc The locale to use
    * <span class="attrib">@see</span> #getTimeZone
    */</span>
   <span class="reserved">this</span>.setTimeZone = <span class="reserved">function</span>(tz) {
      timezone = tz;
      <span class="reserved">return</span>;
   };

   <span class="comment">/**
    * Returns the locale used within this calendar instance. By default
    * the timezone used by this calendar is the default timezone
    * of the Java Virtual Machine running Helma.
    * <span class="attrib">@returns</span> The locale of this calendar
    * <span class="attrib">@type</span> java.util.Locale
    * <span class="attrib">@see</span> #setTimeZone
    */</span>
   <span class="reserved">this</span>.getTimeZone = <span class="reserved">function</span>() {
      <span class="reserved">return</span> timezone;
   };

   <span class="comment">/**
    * Sets the format of the hrefs to render by this calendar
    * to the format pattern passed as argument.
    * <span class="attrib">@param</span> {String} fmt The date format pattern to use for
    * rendering the href
    * <span class="attrib">@see</span> #getHrefFormat
    */</span>
   <span class="reserved">this</span>.setHrefFormat = <span class="reserved">function</span>(fmt) {
      hrefFormat = fmt;
      <span class="reserved">return</span>;
   };

   <span class="comment">/**
    * Returns the date formatting pattern used to render hrefs. The default
    * format is "yyyyMMdd".
    * <span class="attrib">@returns</span> The date formatting pattern
    * <span class="attrib">@type</span> String
    * <span class="attrib">@see</span> #setHrefFormat
    */</span>
   <span class="reserved">this</span>.getHrefFormat = <span class="reserved">function</span>() {
      <span class="reserved">return</span> hrefFormat;
   };

   <span class="comment">/**
    * Sets the format of the group name to use when trying to access
    * child objects of the collection this calendar is operating on.
    * <span class="attrib">@param</span> {String} fmt The date format pattern to use for
    * accessing child objects
    * <span class="attrib">@see</span> #getAccessNameFormat
    */</span>
   <span class="reserved">this</span>.setAccessNameFormat = <span class="reserved">function</span>(fmt) {
      accessNameFormat = fmt;
      <span class="reserved">return</span>;
   };

   <span class="comment">/**
    * Returns the format of the access name used by this calendar to access
    * child group objects of the collection this calendar is operating on.
    * The default format is "yyyyMMdd".
    * <span class="attrib">@returns</span> The date formatting pattern used to access child objects
    * <span class="attrib">@type</span> String
    * <span class="attrib">@see</span> #setAccessNameFormat
    */</span>
   <span class="reserved">this</span>.getAccessNameFormat = <span class="reserved">function</span>() {
      <span class="reserved">return</span> accessNameFormat;
   };

   <span class="reserved">return</span> <span class="reserved">this</span>;
};

<span class="comment">/** <span class="attrib">@ignore</span> */</span>
jala.Date.Calendar.<span class="reserved">prototype</span>.toString = <span class="reserved">function</span>() {
   <span class="reserved">return</span> <span class="literal">"[Jala Calendar]"</span>;
};

<span class="comment">/**
 * Renders the calendar using either a custom renderer defined
 * using {<span class="attrib">@link</span> #setRenderer} or the default one.
 * <span class="attrib">@see</span> #setRenderer
 * <span class="attrib">@see</span> jala.Date.Calendar.Renderer
 */</span>
jala.Date.Calendar.<span class="reserved">prototype</span>.render = <span class="reserved">function</span>(today) {
   var renderer = <span class="reserved">this</span>.getRenderer();
   var collection = <span class="reserved">this</span>.getCollection();
   var hrefFormat = <span class="reserved">this</span>.getHrefFormat();
   var accessNameFormat = <span class="reserved">this</span>.getAccessNameFormat();
   var locale = <span class="reserved">this</span>.getLocale();
   var timezone = <span class="reserved">this</span>.getTimeZone();
   var size = collection.size();
   <span class="reserved">if</span> (size == null)
      <span class="reserved">return</span>;

   <span class="comment">/**
    * private method that creates a date object set
    * to the last date of the previous month or the
    * first date of the next month (if available)
    */</span>
   var prevNextMonth = <span class="reserved">function</span>(which, dayIndex) {
      var obj;
      <span class="reserved">if</span> (which == <span class="literal">"prev"</span>) {
         <span class="reserved">if</span> (size &lt;= dayIndex || !(obj = collection.get(dayIndex +1)))
            <span class="reserved">return</span>;
      } <span class="reserved">else</span> <span class="reserved">if</span> (which == <span class="literal">"next"</span>) {
         <span class="reserved">if</span> (dayIndex == 0 || !(obj = collection.get(dayIndex - 1)))
            <span class="reserved">return</span>;
      } <span class="reserved">else</span> {
         <span class="reserved">return</span>;
      }
      <span class="reserved">return</span> new Date(obj.groupname.substring(0, 4),
                      obj.groupname.substring(4, 6) -1,
                      obj.groupname.substring(6));
   };

   <span class="comment">// create the calendar object used for date calculations</span>
   var cal = java.util.Calendar.getInstance(timezone, locale);
   var firstDayOfWeek = cal.getFirstDayOfWeek();
   var symbols = new java.text.DateFormatSymbols(locale);

   res.push();
   <span class="comment">// render the header-row</span>
   res.push();
   var weekdays = symbols.getShortWeekdays();
   <span class="reserved">for</span> (var i=0;i&lt;7;i++) {
      renderer.renderDayHeader(weekdays[(i+firstDayOfWeek-1)%7+1]);
   }
   renderer.renderRow(res.pop());

   cal.set(java.util.Calendar.DATE, 1);
   <span class="comment">// check whether there's a day in path</span>
   <span class="comment">// if so, use it to determine the month to render</span>
   <span class="reserved">if</span> (today) {
      cal.set(java.util.Calendar.YEAR, today.getFullYear());
      cal.set(java.util.Calendar.MONTH, today.getMonth());
   }
   <span class="comment">// nr. of empty days in rendered calendar before the first day of month appears</span>
   var pre = (7-firstDayOfWeek+cal.get(java.util.Calendar.DAY_OF_WEEK)) % 7;
   var days = cal.getActualMaximum(java.util.Calendar.DATE);
   var weeks = Math.ceil((pre + days) / 7);
   var daycnt = 1;

   var date = cal.getTime();
   <span class="comment">// remember the index of the first and last days within this month.</span>
   <span class="comment">// this is needed to optimize previous and next month links.</span>
   var lastDayIndex = Number.MAX_VALUE;
   var firstDayIndex = -1;

   var dayObj, idx, selected;
   <span class="reserved">for</span> (var i=0;i&lt;weeks;i++) {
      res.push();
      <span class="reserved">for</span> (var j=0;j&lt;7;j++) {
         <span class="reserved">if</span> ((i == 0 &amp;&amp; j &lt; pre) || daycnt &gt; days) {
            renderer.renderDay(null);
         } <span class="reserved">else</span> {
            date.setDate(daycnt);
            <span class="reserved">if</span> ((dayObj = collection.get(date.format(accessNameFormat))) != null) {
               idx = collection.contains(dayObj);
               <span class="reserved">if</span> (idx &gt; -1) {
                  <span class="reserved">if</span>  (idx &gt; firstDayIndex) {
                     firstDayIndex = idx;
                  }
                  <span class="reserved">if</span> (idx &lt; lastDayIndex) {
                     lastDayIndex = idx;
                  }
               }
            }
            selected = (today != null) ? date.equals(today) : false;
            renderer.renderDay(date, dayObj != null, selected);
            daycnt++;
         }
      }
      renderer.renderRow(res.pop());
   }
   var prevMonth = prevNextMonth(<span class="literal">"prev"</span>, firstDayIndex) || null;
   var nextMonth = prevNextMonth(<span class="literal">"next"</span>, lastDayIndex) || null;
   renderer.renderCalendar(date, res.pop(), prevMonth, nextMonth);
   <span class="reserved">return</span>;
};

<span class="comment">/**
 * Returns a rendered calendar
 * <span class="attrib">@see</span> #renderCalendar
 * <span class="attrib">@type</span> String
 */</span>
jala.Date.Calendar.<span class="reserved">prototype</span>.getCalendar = <span class="reserved">function</span>(today) {
   res.push();
   <span class="reserved">this</span>.render(today);
   <span class="reserved">return</span> res.pop();
};

<span class="comment">/**
 * Returns a new instance of the default calendar renderer.
 * <span class="attrib">@class</span> A default renderer to use in conjunction with jala.Date.Calendar
 * <span class="attrib">@param</span> {jala.Date.Calendar} calendar The calendar utilizing this renderer
 * <span class="attrib">@returns</span> A newly created instance of jala.Date.Calendar.Renderer
 * <span class="attrib">@constructor</span>
 */</span>
jala.Date.Calendar.Renderer = <span class="reserved">function</span>(calendar) {

   <span class="comment">/**
    * An instance of helma.Html used for rendering the calendar
    * <span class="attrib">@type</span> helma.Html
    */</span>
   <span class="reserved">this</span>.html = new helma.Html();

   <span class="comment">/**
    * The calendar utilizing this renderer instance
    * <span class="attrib">@type</span> jala.Date.Calendar
    */</span>
   <span class="reserved">this</span>.calendar = calendar;

   <span class="reserved">return</span> <span class="reserved">this</span>;
};

<span class="comment">/** <span class="attrib">@ignore</span> */</span>
jala.Date.Calendar.Renderer.<span class="reserved">prototype</span>.toString = <span class="reserved">function</span>() {
   <span class="reserved">return</span> <span class="literal">"[Jala Calendar Default Renderer]"</span>;
};

<span class="comment">/**
 * Renders a single cell in the calendar day header row directly to response.
 * <span class="attrib">@param</span> {String} text The text to display in the header field.
 */</span>
jala.Date.Calendar.Renderer.<span class="reserved">prototype</span>.renderDayHeader = <span class="reserved">function</span>(text) {
   <span class="reserved">this</span>.html.element(<span class="literal">"th"</span>, text);
   <span class="reserved">return</span>;
};

<span class="comment">/**
 * Renders a single calendar row directly to response.
 * <span class="attrib">@param</span> {String} row The body of the calendar row.
 */</span>
jala.Date.Calendar.Renderer.<span class="reserved">prototype</span>.renderRow = <span class="reserved">function</span>(row) {
   <span class="reserved">this</span>.html.element(<span class="literal">"tr"</span>, row);
   <span class="reserved">return</span>;
};

<span class="comment">/**
 * Renders a single day within the calendar directly to response.
 * <span class="attrib">@param</span> {Date} date A date instance representing the day within the calendar.
 * <span class="attrib">@param</span> {Boolean} isExisting True if there is a child object in the calendar's
 * collection to which the date cell should link to
 * <span class="attrib">@param</span> {Boolean} isSelected True if this calendar day should be rendered
 * as selected day.
 */</span>
jala.Date.Calendar.Renderer.<span class="reserved">prototype</span>.renderDay = <span class="reserved">function</span>(date, isExisting, isSelected) {
   var attr = {<span class="literal">"class"</span>: <span class="literal">"day"</span>};
   <span class="reserved">if</span> (isSelected === true) {
      attr[<span class="literal">"class"</span>] += <span class="literal">" selected"</span>;
   }
   <span class="reserved">this</span>.html.openTag(<span class="literal">"td"</span>, attr);
   <span class="reserved">if</span> (date != null) {
      var text = date.getDate();
      <span class="reserved">if</span> (isExisting === true) {
         attr = {<span class="literal">"href"</span>: <span class="reserved">this</span>.calendar.getCollection().href() +
                         date.format(<span class="reserved">this</span>.calendar.getHrefFormat())};
         <span class="reserved">this</span>.html.link(attr, text);
      } <span class="reserved">else</span> {
         res.write(text);
      }
   }
   <span class="reserved">this</span>.html.closeTag(<span class="literal">"td"</span>);
   <span class="reserved">return</span>;
};

<span class="comment">/**
 * Renders a link to the previous or next month's calendar directly to response.
 * <span class="attrib">@param</span> {Date} date A date object set to the previous or next available
 * month. This can be null in case there is no previous or next month.
 */</span>
jala.Date.Calendar.Renderer.<span class="reserved">prototype</span>.renderPrevNextLink = <span class="reserved">function</span>(date) {
   <span class="reserved">if</span> (date != null) {
      var attr = {<span class="literal">"href"</span>: <span class="reserved">this</span>.calendar.getCollection().href() +
                          date.format(<span class="reserved">this</span>.calendar.getHrefFormat())};
      <span class="reserved">this</span>.html.link(attr, date.format(<span class="literal">"MMMM"</span>, <span class="reserved">this</span>.calendar.getLocale()));
   }
   <span class="reserved">return</span>;
};

<span class="comment">/**
 * Renders the calendar directly to response.
 * <span class="attrib">@param</span> {Date} date A date object representing this calendar's month and year.
 * Please mind that the day will be set to the &lt;em&gt;last&lt;/em&gt; date in this
 * month.
 * <span class="attrib">@param</span> {String} body The rendered calendar weeks including the day header
 * (basically the whole kernel of the table).
 * <span class="attrib">@param</span> {Date} prevMonth A date object set to the last available date of
 * the previous month. This can be used to render a navigation link to
 * the previous month.
 * <span class="attrib">@param</span> {Date} nextMonth A date object set to the first available date
 * of the next month. This can be used to render a navigation link to
 * the next month.
 */</span>
jala.Date.Calendar.Renderer.<span class="reserved">prototype</span>.renderCalendar = <span class="reserved">function</span>(date, body, prevMonth, nextMonth) {
   var locale = <span class="reserved">this</span>.calendar.getLocale();
   <span class="reserved">this</span>.html.openTag(<span class="literal">"table"</span>, {<span class="literal">"class"</span>: <span class="literal">"calendar"</span>});
   <span class="reserved">this</span>.html.openTag(<span class="literal">"thead"</span>);
   <span class="reserved">this</span>.html.openTag(<span class="literal">"tr"</span>);
   <span class="reserved">this</span>.html.openTag(<span class="literal">"th"</span>, {<span class="literal">"colspan"</span>: 7});
   res.write(date.format(<span class="literal">"MMMM"</span>, locale));
   res.write(<span class="literal">' '</span>);
   res.write(date.format(<span class="literal">"yyyy"</span>, locale));
   <span class="reserved">this</span>.html.closeTag(<span class="literal">"th"</span>);
   <span class="reserved">this</span>.html.closeTag(<span class="literal">"tr"</span>);
   <span class="reserved">this</span>.html.closeTag(<span class="literal">"thead"</span>);
   <span class="reserved">this</span>.html.element(<span class="literal">"tbody"</span>, body);
   <span class="reserved">this</span>.html.openTag(<span class="literal">"tfoot"</span>);
   <span class="reserved">this</span>.html.openTag(<span class="literal">"tr"</span>);
   <span class="reserved">this</span>.html.openTag(<span class="literal">"td"</span>, {<span class="literal">"class"</span>: <span class="literal">"left"</span>, <span class="literal">"colspan"</span>: 3});
   <span class="reserved">this</span>.renderPrevNextLink(prevMonth);
   <span class="reserved">this</span>.html.closeTag(<span class="literal">"td"</span>);
   <span class="reserved">this</span>.html.openTag(<span class="literal">"td"</span>);
   <span class="reserved">this</span>.html.closeTag(<span class="literal">"td"</span>);
   <span class="reserved">this</span>.html.openTag(<span class="literal">"td"</span>, {<span class="literal">"class"</span>: <span class="literal">"right"</span>, <span class="literal">"colspan"</span>: 3});
   <span class="reserved">this</span>.renderPrevNextLink(nextMonth);
   <span class="reserved">this</span>.html.closeTag(<span class="literal">"td"</span>);
   <span class="reserved">this</span>.html.closeTag(<span class="literal">"tr"</span>);
   <span class="reserved">this</span>.html.closeTag(<span class="literal">"tfoot"</span>);
   <span class="reserved">this</span>.html.closeTag(<span class="literal">"table"</span>);
   <span class="reserved">return</span>;
};

<span class="comment">/**
 * Default date class instance.
 * <span class="attrib">@type</span> jala.Date
 * <span class="attrib">@final</span>
 */</span>
jala.date = new jala.Date();
</pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b>Jala 1.0</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">

</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Wed Apr  4 17:06:49 2007</div>
</body>
</html>
